<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Password Generator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #333333;
            color: #EEEEEE;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        .header {
            margin-top: 35vh;
            margin-bottom: 35px;
        }

        .password-giver {
            display: flex;
            align-items: center;
        }

        .password-giver > input {
            padding: 10px;
            border: 1px solid #EEEEEE;
            color: #BBBBBB;
            border-radius: 20px;
            width: 400px;
            background-color: #333333;
        }

        .copy > svg {
            width: 40px;
            height: 40px;
            margin-left: 15px;
            cursor: pointer;
        }

        .generate {
            margin-top: 20px;
            font-size: 22px;
            font-weight: bold;
            padding: 6px 18px 6px 18px;
            border-radius: 20px;
            border: 1px solid #EEEEEE;
            transition: color .2s ease-out .1s,
                        background-color .2s ease-out .1s;
        }

        .generate:hover {
            transition: color .2s ease-in .25s,
                        background-color .2s ease-in .25s;
            color: #333333;
            background-color: #EEEEEE;
            cursor: pointer
        }

        .copy-check {
            font-size: 22px;
            display: None;
        }

        .options-selector {
            display: flex;
            flex-direction: column;

            border: 1px solid #EEEEEE;
            margin-top: 30px;
            padding: 10px;
            border-radius: 10px;
        }

        .options-selector > label {
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1> Password Generator</h1>
        <h3> <em> By Corentin Caugant </em></h3>
    </div>
    <div class="password-giver">
        <input aria-label="Location of generated passwords" type="text" value="Your password..." id="password" readonly="True">
        <div alt="copy to clipboard" aria-label="copy to clipboard" class="copy"> <svg viewBox="0 0 125 125"> width="339.99347"
            height="460.99963"
            viewBox="0 0 89.956603 121.97282"
            version="1.1"
            id="svg5"
            inkscape:version="1.1 (c68e22c387, 2021-05-23)"
            sodipodi:docname="copy.svg"
            xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
            xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
            xmlns="http://www.w3.org/2000/svg"
            xmlns:svg="http://www.w3.org/2000/svg">
           <sodipodi:namedview
              id="namedview7"
              pagecolor="#505050"
              bordercolor="#eeeeee"
              borderopacity="1"
              inkscape:pageshadow="0"
              inkscape:pageopacity="0"
              inkscape:pagecheckerboard="0"
              inkscape:document-units="px"
              showgrid="false"
              showborder="false"
              units="px"
              fit-margin-top="0"
              fit-margin-left="0"
              fit-margin-right="0"
              fit-margin-bottom="0"
              inkscape:zoom="0.70710678"
              inkscape:cx="296.27774"
              inkscape:cy="243.95184"
              inkscape:window-width="1920"
              inkscape:window-height="1017"
              inkscape:window-x="-8"
              inkscape:window-y="-8"
              inkscape:window-maximized="1"
              inkscape:current-layer="layer1" />
           <defs
              id="defs2" />
           <g
              inkscape:label="Layer 1"
              inkscape:groupmode="layer"
              id="layer1"
              transform="translate(-94.0626,-49.080206)">
             <rect
                style="fill:#ffffff;stroke:#ffffff;stroke-width:1.32292;stroke-miterlimit:4;stroke-dasharray:none"
                id="rect846"
                width="65.881248"
                height="106.59811"
                x="94.72406"
                y="63.793461"
                ry="9.5249996" />
             <path
                id="rect1013"
                style="fill:none;stroke:#ffffff;stroke-width:5.00001;stroke-miterlimit:4;stroke-dasharray:none"
                d="m 480,188 c -19.944,0 -36,16.056 -36,36 v 330.89062 c 0,19.944 16.056,36 36,36 h 177 c 19.944,0 36,-16.056 36,-36 v -286 h -46 c -19.944,0 -36,-16.056 -36,-36 V 188 Z"
                transform="scale(0.26458333)" />
             <path
                style="fill:#ffffff;stroke:#ffffff;stroke-width:1.32292;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
                d="m 161.85884,49.551497 21.69584,21.40231"
                id="path1205" />
           </g> </svg> </div>
           <div class="copy-check"> &#x2713; </div> 
    </div>
    
    <div class="generate"> Generate </div>

    <div class="options-selector">
        <h3> Parameters :</h3>

        <label for="length"> Length </label>
        <input id="length" type="number" min=10 max=100 value=10>

        <label for="numbers"> Toggle numbers <input id="numbers" type="checkbox" checked=True> </label>
        <label for="specials"> Toggle special characters <input id="specials" type="checkbox" checked=True> </label>
        <label for="specials-c"> Toggle special characters <input id="specials-c" type="checkbox"> </label>
    </div>

    <script>
        const copyButton = document.querySelector(".copy");
        const copyCheck = document.querySelector(".copy-check");
        const passwordLocation = document.getElementById("password");
        const generateButton = document.querySelector(".generate");


        function shuffleArray(array) {
            for (var i = array.length - 1; i > 0; i--) {
                var j = Math.floor(Math.random() * (i + 1));
                var temp = array[i];
                array[i] = array[j];
                array[j] = temp;
            }
        }

        function getParameters() {
            const length = document.getElementById('length');
            const numbers = document.getElementById('numbers');
            const specials = document.getElementById('specials');
            const specialsC = document.getElementById('specials-c');

            let passwordLength;
            if (length.value < 10 || length.value > 100) {
                passwordLength = 10
            } else {
                passwordLength = parseInt(length.value)
            }

            return [passwordLength, numbers.checked, specials.checked, specialsC.checked]
        }

        copyButton.addEventListener('click', () => {
            /* Get the text field */
            var copyText = document.getElementById("password");

            /* Select the text field */
            copyText.select();
            copyText.setSelectionRange(0, 99999); /* For mobile devices */

            /* Copy the text inside the text field */
            navigator.clipboard.writeText(copyText.value);

            /* Some feedbacks for the user*/
            copyCheck.style.display = "block";
            setTimeout(() => {
                copyCheck.style.display = "none";
            }, 800)
        });

        generateButton.addEventListener('click', () => {
            var letters = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z"];
            var numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 0];
            var specials = ["-", "@", "_", "?", "!", "."];
            var specialsC = ["é", "ë", "à", "ç", "ĝ", "ô", "ö", "ĥ", "ḧ", "ä", "ẍ", "ẗ", "ÿ", "ŷ"];

            // Retrieving parameters
            parameters = getParameters();
            let passwordLength = parameters[0];
            let numbersP = parameters[1];
            let specialsP = parameters[2];
            let specialsPC = parameters[3];

            let total = letters;
            // Adding numbers & specials characters
            if (numbersP) {
                total = total.concat(numbers)
            }
            if (specialsP) {
                total = total.concat(specials);
            }
            if (specialsPC) {
                total = total.concat(specialsC)
            }

            // Shuffling our array to add randomness
            shuffleArray(total)

            // Now generating the password given a password length
            password = ""
            for (var i = 0; i < passwordLength; i++) {
                magic_number = Math.floor(Math.random() * total.length)
                password += total[magic_number]
            }

            passwordLocation.value = password
        })
    </script>
</body>
</html>